{
    "version": "https://jsonfeed.org/version/1",
    "title": "木语 • All posts by \"dataset\" category",
    "description": "Spark!",
    "home_page_url": "https://koen666.github.io",
    "items": [
        {
            "id": "https://koen666.github.io/2025/08/09/yolo-dataset/",
            "url": "https://koen666.github.io/2025/08/09/yolo-dataset/",
            "title": "yolo+AnyLabeling实现数据集的自动标注",
            "date_published": "2025-08-09T15:00:00.000Z",
            "content_html": "<h2 id=\"一-环境准备\"><a class=\"anchor\" href=\"#一-环境准备\">#</a> 一、环境准备</h2>\n<p>首先需要创建一个conda虚拟环境，进行yolo环境的搭建</p>\n<pre class=\"shiki shiki-themes vitesse-light vitesse-dark\" style=\"background-color:#ffffff;--shiki-dark-bg:#121212;color:#393a34;--shiki-dark:#dbd7caee\" tabindex=\"0\"><code class=\"language-bash\"><span class=\"line\"><span style=\"color:#59873A;--shiki-dark:#80A665\">pip</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> install</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> yolo</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#59873A;--shiki-dark:#80A665\">pip</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> install</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> ultralytics</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#59873A;--shiki-dark:#80A665\">pip</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> install</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> ncnn</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#59873A;--shiki-dark:#80A665\">pip</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> install</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> onnx</span><span style=\"color:#A0ADA0;--shiki-dark:#758575DD\"> #用于格式转换</span></span></code></pre>\n<p>之后创建一个空目录，目录结构如下</p>\n<p><img loading=\"lazy\" src=\"/images/yolo-dataset/yolotraindir.png\" alt=\"\" /></p>\n<p>准备好需要用来训练的部分图片(50-100张吧差不多，多点更好，但是就是用来标注数据的没必要那么多后面手动改改叭)，放到images文件下的三个文件夹都存放一份</p>\n<h2 id=\"二-数据标注\"><a class=\"anchor\" href=\"#二-数据标注\">#</a> 二、数据标注</h2>\n<p>准备好环境搭建之后，新建一个<code>classes.txt</code>文件放到labels/train文件夹下，里面按顺序写好你的标签是什么比如我训练这个模型就是用来标注电池的</p>\n<p><img loading=\"lazy\" src=\"/images/yolo-dataset/battery.png\" alt=\"\" /></p>\n<p>那你的文件内容就是</p>\n<pre class=\"shiki shiki-themes vitesse-light vitesse-dark\" style=\"background-color:#ffffff;--shiki-dark-bg:#121212;color:#393a34;--shiki-dark:#dbd7caee\" tabindex=\"0\"><code class=\"language-bash\"><span class=\"line\"><span style=\"color:#59873A;--shiki-dark:#80A665\">battery</span></span></code></pre>\n<p>ok，创建完成之后就开始对数据进行正常标注，然后将结果导出到labels/train文件夹下</p>\n<h2 id=\"三-开始训练\"><a class=\"anchor\" href=\"#三-开始训练\">#</a> 三、开始训练</h2>\n<p>首先需要写入一个配置文件<code>xxx.yaml</code>写到yolotrain目录下，内容如下</p>\n<pre class=\"shiki shiki-themes vitesse-light vitesse-dark\" style=\"background-color:#ffffff;--shiki-dark-bg:#121212;color:#393a34;--shiki-dark:#dbd7caee\" tabindex=\"0\"><code class=\"language-bash\"><span class=\"line\"><span style=\"color:#59873A;--shiki-dark:#80A665\">path:</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> D:</span><span style=\"color:#A65E2B;--shiki-dark:#C99076\">\\y</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">olotrain</span><span style=\"color:#A0ADA0;--shiki-dark:#758575DD\">       # 数据集根目录</span></span>\n<span class=\"line\"><span style=\"color:#59873A;--shiki-dark:#80A665\">train:</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> images/train</span><span style=\"color:#A0ADA0;--shiki-dark:#758575DD\">      # 训练集相对路径</span></span>\n<span class=\"line\"><span style=\"color:#59873A;--shiki-dark:#80A665\">val:</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> images/val</span><span style=\"color:#A0ADA0;--shiki-dark:#758575DD\">          # 验证集相对路径</span></span>\n<span class=\"line\"><span style=\"color:#998418;--shiki-dark:#B8A965\">test</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">:</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> images/test</span><span style=\"color:#A0ADA0;--shiki-dark:#758575DD\">        # 测试集相对路径</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#59873A;--shiki-dark:#80A665\">nc:</span><span style=\"color:#2F798A;--shiki-dark:#4C9A91\"> 1</span><span style=\"color:#A0ADA0;--shiki-dark:#758575DD\">                    # 类别数量</span></span>\n<span class=\"line\"><span style=\"color:#59873A;--shiki-dark:#80A665\">names:</span><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\"> </span><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">[</span><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">battery</span><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">]</span><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\">       </span><span style=\"color:#A0ADA0;--shiki-dark:#758575DD\"># 类别名称列表</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#A0ADA0;--shiki-dark:#758575DD\"># 高级参数（可选）</span></span>\n<span class=\"line\"><span style=\"color:#59873A;--shiki-dark:#80A665\">roboflow:</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> &#123;&#125;</span><span style=\"color:#A0ADA0;--shiki-dark:#758575DD\">             # 兼容RoboFlow数据集</span></span>\n<span class=\"line\"><span style=\"color:#59873A;--shiki-dark:#80A665\">download:</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> null</span><span style=\"color:#A0ADA0;--shiki-dark:#758575DD\">           # 数据集下载URL</span></span></code></pre>\n<p>在虚拟环境下进入yolotrain目录输入指令开始训练</p>\n<pre class=\"shiki shiki-themes vitesse-light vitesse-dark\" style=\"background-color:#ffffff;--shiki-dark-bg:#121212;color:#393a34;--shiki-dark:#dbd7caee\" tabindex=\"0\"><code class=\"language-bash\"><span class=\"line\"><span style=\"color:#59873A;--shiki-dark:#80A665\">yolo</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> detect</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> train</span><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\"> </span></span>\n<span class=\"line\"><span style=\"color:#A0ADA0;--shiki-dark:#758575DD\">#data是你自己的yaml文件路径</span></span>\n<span class=\"line\"><span style=\"color:#B07D48;--shiki-dark:#BD976A\">  data</span><span style=\"color:#999999;--shiki-dark:#666666\">=</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">D:/yolotrain/xxx.yaml</span><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\"> </span></span>\n<span class=\"line\"><span style=\"color:#B07D48;--shiki-dark:#BD976A\">  model</span><span style=\"color:#999999;--shiki-dark:#666666\">=</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">yolov8s.pt</span><span style=\"color:#A0ADA0;--shiki-dark:#758575DD\">      # 预训练模型（放在yolotrain目录下）</span></span>\n<span class=\"line\"><span style=\"color:#B07D48;--shiki-dark:#BD976A\">  epochs</span><span style=\"color:#999999;--shiki-dark:#666666\">=</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">100</span><span style=\"color:#A0ADA0;--shiki-dark:#758575DD\">            # 迭代次数</span></span>\n<span class=\"line\"><span style=\"color:#B07D48;--shiki-dark:#BD976A\">  imgsz</span><span style=\"color:#999999;--shiki-dark:#666666\">=</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">640</span><span style=\"color:#A0ADA0;--shiki-dark:#758575DD\">             # 输入分辨率</span></span>\n<span class=\"line\"><span style=\"color:#B07D48;--shiki-dark:#BD976A\">  batch</span><span style=\"color:#999999;--shiki-dark:#666666\">=</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">16</span><span style=\"color:#A0ADA0;--shiki-dark:#758575DD\">              # 根据GPU调整</span></span>\n<span class=\"line\"><span style=\"color:#B07D48;--shiki-dark:#BD976A\">  device</span><span style=\"color:#999999;--shiki-dark:#666666\">=</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">0</span><span style=\"color:#A0ADA0;--shiki-dark:#758575DD\">              # 0代表GPU练</span></span>\n<span class=\"line\"><span style=\"color:#A0ADA0;--shiki-dark:#758575DD\">#下面是参数，命令合并成一行</span></span></code></pre>\n<p>若要进行验证把<code>train</code>改成<code>val</code>就行了，然后那个yolo模型我放在我的git仓库里了 <a href=\"https://github.com/koen666/yolo\">yolo模型</a></p>\n<h2 id=\"四-导出onnx\"><a class=\"anchor\" href=\"#四-导出onnx\">#</a> 四、导出onnx</h2>\n<pre class=\"shiki shiki-themes vitesse-light vitesse-dark\" style=\"background-color:#ffffff;--shiki-dark-bg:#121212;color:#393a34;--shiki-dark:#dbd7caee\" tabindex=\"0\"><code class=\"language-bash\"><span class=\"line\"><span style=\"color:#59873A;--shiki-dark:#80A665\">yolo</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> export</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> model=D:/yolotrain/best.pt</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> format=onnx</span></span></code></pre>\n<p>训练完后，<a href=\"http://xn--runbest-qw3kp0dtg3g249a7zf2qvoqw8wv0tak73vha.pt\">可以从新得到的run文件夹下的best.pt</a>(这个就是训练的最好的模型)文件挪到外面，在调用上面那个命令生成best.onnx文件</p>\n<p>然后再创建一个xxx.yaml文件写入</p>\n<pre class=\"shiki shiki-themes vitesse-light vitesse-dark\" style=\"background-color:#ffffff;--shiki-dark-bg:#121212;color:#393a34;--shiki-dark:#dbd7caee\" tabindex=\"0\"><code class=\"language-bash\"><span class=\"line\"><span style=\"color:#998418;--shiki-dark:#B8A965\">type</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">:</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> yolov8</span></span>\n<span class=\"line\"><span style=\"color:#59873A;--shiki-dark:#80A665\">name:</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> yolov8s-r20230520</span></span>\n<span class=\"line\"><span style=\"color:#59873A;--shiki-dark:#80A665\">display_name:</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> koen</span></span>\n<span class=\"line\"><span style=\"color:#59873A;--shiki-dark:#80A665\">model_path:</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> best.onnx</span></span>\n<span class=\"line\"><span style=\"color:#59873A;--shiki-dark:#80A665\">nms_threshold:</span><span style=\"color:#2F798A;--shiki-dark:#4C9A91\"> 0.45</span></span>\n<span class=\"line\"><span style=\"color:#59873A;--shiki-dark:#80A665\">confidence_threshold:</span><span style=\"color:#2F798A;--shiki-dark:#4C9A91\"> 0.25</span></span>\n<span class=\"line\"><span style=\"color:#59873A;--shiki-dark:#80A665\">classes:</span></span>\n<span class=\"line\"><span style=\"color:#59873A;--shiki-dark:#80A665\">  -</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> battery</span></span></code></pre>\n<p>这个display_name可以换阿，这个文件就是你模型的配置文件</p>\n<h2 id=\"五-使用yaml操作\"><a class=\"anchor\" href=\"#五-使用yaml操作\">#</a> 五、使用yaml操作</h2>\n<p>进入<code>AnyLabeling</code>软件，左侧tab栏有AI选项，点击，选择自定义模型，选择刚刚配置的yaml文件即可</p>\n",
            "tags": [
                "dataset",
                "yolo",
                "AnyLabeling"
            ]
        }
    ]
}