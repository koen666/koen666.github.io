{
    "version": "https://jsonfeed.org/version/1",
    "title": "木语 • All posts by \"virtual\" tag",
    "description": "Spark!",
    "home_page_url": "http://example.com",
    "items": [
        {
            "id": "http://example.com/2025/07/26/docker-basic-usage/",
            "url": "http://example.com/2025/07/26/docker-basic-usage/",
            "title": "Docker 基本使用教程",
            "date_published": "2025-07-26T00:53:34.303Z",
            "content_html": "<blockquote>\n<p>Docker 可以让开发者打包他们的应用以及依赖包到一个轻量级、可移植的容器中，然后发布到任何流行的 Linux 机器上，也可以实现虚拟化。</p>\n</blockquote>\n<hr />\n<h2 id=\"一-docker的用途\"><a class=\"anchor\" href=\"#一-docker的用途\">#</a> 一、Docker的用途</h2>\n<p>Docker 的主要用途，目前有三大类。</p>\n<ol>\n<li>\n<p>提供一次性的环境。比如，本地测试他人的软件、持续集成的时候提供单元测试和构建的环境。</p>\n</li>\n<li>\n<p>提供弹性的云服务。因为 Docker 容器可以随开随关，很适合动态扩容和缩容。</p>\n</li>\n<li>\n<p>组建微服务架构。通过多个容器，一台机器可以跑多个服务，因此在本机就可以模拟出微服务架构。</p>\n</li>\n</ol>\n<hr />\n<h2 id=\"二-验证是否安装成功\"><a class=\"anchor\" href=\"#二-验证是否安装成功\">#</a> 二、验证是否安装成功</h2>\n<pre class=\"shiki shiki-themes vitesse-light vitesse-dark\" style=\"background-color:#ffffff;--shiki-dark-bg:#121212;color:#393a34;--shiki-dark:#dbd7caee\" tabindex=\"0\"><code class=\"language-bash\"><span class=\"line\"><span style=\"color:#59873A;--shiki-dark:#80A665\">docker</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> version</span></span></code></pre>\n<hr />\n<h2 id=\"三-image文件\"><a class=\"anchor\" href=\"#三-image文件\">#</a> 三、Image文件</h2>\n<p>Docker 把应用程序及其依赖，打包在 <strong>image 文件</strong>里面。只有通过这个文件，才能生成 Docker 容器。<br />\nimage 文件可以看作是容器的模板，Docker 根据 image 文件生成容器的实例。<br />\n同一个 image 文件，可以生成多个同时运行的容器实例。</p>\n<p>image 是一个 <strong>二进制文件</strong>。实际开发中，一个 image 文件往往通过继承另一个 image 文件，加上一些个性化设置而生成。<br />\n举例来说，你可以在 Ubuntu 的 image 基础上，往里面加入 Apache 服务器，形成你自己的 image。</p>\n<h3 id=\"列出本机的所有-image-文件\"><a class=\"anchor\" href=\"#列出本机的所有-image-文件\">#</a> 列出本机的所有 image 文件</h3>\n<pre class=\"shiki shiki-themes vitesse-light vitesse-dark\" style=\"background-color:#ffffff;--shiki-dark-bg:#121212;color:#393a34;--shiki-dark:#dbd7caee\" tabindex=\"0\"><code class=\"language-bash\"><span class=\"line\"><span style=\"color:#59873A;--shiki-dark:#80A665\">$</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> docker</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> image</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> ls</span></span></code></pre>\n<h4 id=\"️-删除-image-文件\"><a class=\"anchor\" href=\"#️-删除-image-文件\">#</a> 🗑️ 删除 image 文件</h4>\n<pre class=\"shiki shiki-themes vitesse-light vitesse-dark\" style=\"background-color:#ffffff;--shiki-dark-bg:#121212;color:#393a34;--shiki-dark:#dbd7caee\" tabindex=\"0\"><code class=\"language-bash\"><span class=\"line\"><span style=\"color:#59873A;--shiki-dark:#80A665\">$</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> docker</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> image</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> rm</span><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\"> </span><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">[</span><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\">imageName</span><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">]</span></span></code></pre>\n<p>image 文件是通用的，一台机器的 image 文件拷贝到另一台机器，照样可以使用。</p>\n<p>一般来说，为了节省时间，我们应该尽量使用别人制作好的 image 文件，而不是自己制作。<br />\n即使要定制，也应该基于别人的 image 文件进行加工，而不是从零开始制作。</p>\n<h3 id=\"镜像仓库image-repository\"><a class=\"anchor\" href=\"#镜像仓库image-repository\">#</a> 镜像仓库（Image Repository）</h3>\n<p>为了方便共享，image 文件制作完成后，可以上传到网上的仓库。</p>\n<ul>\n<li>Docker 的官方仓库 <strong>Docker Hub</strong> 是最重要、最常用的 image 仓库。</li>\n<li>此外，你也可以使用国内的镜像仓库（如阿里云、腾讯云）或者搭建私有仓库。</li>\n<li>出售自己制作的 image 文件也是可以的。</li>\n</ul>\n<h3 id=\"imagecontainer\"><a class=\"anchor\" href=\"#imagecontainer\">#</a> image&amp;&amp;container</h3>\n<p>容器是镜像跑起来的实例，一个镜像可以有多个容器</p>\n<hr />\n<h2 id=\"四-如何跑起来呢\"><a class=\"anchor\" href=\"#四-如何跑起来呢\">#</a> 四、如何跑起来呢</h2>\n<pre class=\"shiki shiki-themes vitesse-light vitesse-dark\" style=\"background-color:#ffffff;--shiki-dark-bg:#121212;color:#393a34;--shiki-dark:#dbd7caee\" tabindex=\"0\"><code class=\"language-bash\"><span class=\"line\"><span style=\"color:#59873A;--shiki-dark:#80A665\">docker</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> image</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> pull</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\"> </span><span style=\"color:#AB5959;--shiki-dark:#CB7676\">&#x3C;</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">projec</span><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\">t</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\">></span><span style=\"color:#A0ADA0;--shiki-dark:#758575DD\">       #将image文件从仓库抓取到本地</span></span>\n<span class=\"line\"><span style=\"color:#59873A;--shiki-dark:#80A665\">docker</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> container</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> run</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\"> </span><span style=\"color:#AB5959;--shiki-dark:#CB7676\">&#x3C;</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">projec</span><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\">t</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\">></span><span style=\"color:#A0ADA0;--shiki-dark:#758575DD\">    #将image文件在你的电脑上跑起来，新建容器</span></span>\n<span class=\"line\"><span style=\"color:#59873A;--shiki-dark:#80A665\">docker</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> container</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> start</span><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\"> </span><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">[</span><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\">ID</span><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">]</span><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\">       </span><span style=\"color:#A0ADA0;--shiki-dark:#758575DD\">#将已有的容器跑起来</span></span>\n<span class=\"line\"><span style=\"color:#59873A;--shiki-dark:#80A665\">docker</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> container</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> kill</span><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\"> </span><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">[</span><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\">ID</span><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">]</span><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\">        </span><span style=\"color:#A0ADA0;--shiki-dark:#758575DD\">#手动终止容器的运行</span></span>\n<span class=\"line\"><span style=\"color:#59873A;--shiki-dark:#80A665\">docker</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> container</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> ls</span><span style=\"color:#A0ADA0;--shiki-dark:#758575DD\">               #在你电脑上正在跑起来的容器</span></span>\n<span class=\"line\"><span style=\"color:#59873A;--shiki-dark:#80A665\">docker</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> container</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> ls</span><span style=\"color:#A65E2B;--shiki-dark:#C99076\"> -all</span><span style=\"color:#A0ADA0;--shiki-dark:#758575DD\">          #列出本机所有容器，包括终止运行的容器</span></span>\n<span class=\"line\"><span style=\"color:#59873A;--shiki-dark:#80A665\">docker</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> container</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> rm</span><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\"> </span><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">[</span><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\">containerID</span><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">]</span><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\"> </span><span style=\"color:#A0ADA0;--shiki-dark:#758575DD\">#删除停止运行的容器，防止占用硬盘空间</span></span>\n<span class=\"line\"><span style=\"color:#59873A;--shiki-dark:#80A665\">docker</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> exec</span><span style=\"color:#A65E2B;--shiki-dark:#C99076\"> -it</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> my-nginx</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> bash</span><span style=\"color:#A0ADA0;--shiki-dark:#758575DD\">     #在叫my-nginx的容器内，开启一个bash命令终端进去操作</span></span></code></pre>\n<h2 id=\"注意docker-container-run命令具有自动抓取-image-文件的功能-如果发现本地没有指定的-image-文件就会从仓库自动抓取-因此前面的docker-image-pull命令并不是必需的步骤\"><a class=\"anchor\" href=\"#注意docker-container-run命令具有自动抓取-image-文件的功能-如果发现本地没有指定的-image-文件就会从仓库自动抓取-因此前面的docker-image-pull命令并不是必需的步骤\">#</a> 注意，docker container run命令具有自动抓取 image 文件的功能。如果发现本地没有指定的 image 文件，就会从仓库自动抓取。因此，前面的docker image pull命令并不是必需的步骤。</h2>\n<h2 id=\"五-常见参数\"><a class=\"anchor\" href=\"#五-常见参数\">#</a> 五、常见参数</h2>\n<table>\n<thead>\n<tr>\n<th style=\"text-align:left\">参数</th>\n<th style=\"text-align:left\">全称</th>\n<th style=\"text-align:left\">作用</th>\n<th style=\"text-align:left\">示例</th>\n<th style=\"text-align:left\">说明</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td style=\"text-align:left\"><code>-d</code></td>\n<td style=\"text-align:left\"><code>--detach</code></td>\n<td style=\"text-align:left\">后台运行容器</td>\n<td style=\"text-align:left\"><code>docker run -d nginx</code></td>\n<td style=\"text-align:left\">容器启动后，终端不会附加到容器的输入/输出，返回一个容器ID。这是运行后台服务（如Web服务器、数据库）的标准模式。</td>\n</tr>\n<tr>\n<td style=\"text-align:left\"><code>-p</code></td>\n<td style=\"text-align:left\"><code>--publish</code></td>\n<td style=\"text-align:left\">映射容器端口到主机端口</td>\n<td style=\"text-align:left\"><code>docker run -p 8080:80 nginx</code></td>\n<td style=\"text-align:left\">格式为 <code>-p &lt;主机端口&gt;:&lt;容器端口&gt;</code>。将容器内部的端口暴露给主机，从而可以从外部访问容器内的服务。示例中将容器的80端口映射到主机的8080端口，通过 <code>http://localhost:8080</code> 即可访问Nginx。</td>\n</tr>\n<tr>\n<td style=\"text-align:left\"><code>-v</code></td>\n<td style=\"text-align:left\"><code>--volume</code></td>\n<td style=\"text-align:left\">挂载数据卷</td>\n<td style=\"text-align:left\"><code>docker run -v /host/data:/container/data app</code></td>\n<td style=\"text-align:left\">格式为 <code>-v &lt;主机路径&gt;:&lt;容器路径&gt;</code>。用于在主机和容器之间共享数据或持久化容器内的数据。即使容器被删除，主机上的数据仍然存在。</td>\n</tr>\n<tr>\n<td style=\"text-align:left\"><code>-e</code></td>\n<td style=\"text-align:left\"><code>--env</code></td>\n<td style=\"text-align:left\">设置环境变量</td>\n<td style=\"text-align:left\"><code>docker run -e MY_VAR=value -e DB_HOST=db app</code></td>\n<td style=\"text-align:left\">向容器内部传递配置信息，如数据库连接字符串、密码、运行模式等。应用程序在容器内可以通过读取这些环境变量来改变其行为。</td>\n</tr>\n<tr>\n<td style=\"text-align:left\"><code>--name</code></td>\n<td style=\"text-align:left\"><code>--name</code></td>\n<td style=\"text-align:left\">为容器指定一个名称</td>\n<td style=\"text-align:left\"><code>docker run --name my_nginx nginx</code></td>\n<td style=\"text-align:left\">为创建的容器赋予一个易读的唯一名称，方便后续的管理（如启动、停止、查看日志），而不必使用冗长且难记的容器ID。</td>\n</tr>\n</tbody>\n</table>\n<p>一个典型的 <code>docker run</code> 命令会组合使用这些参数来定义一个功能完整的容器：</p>\n<pre class=\"shiki shiki-themes vitesse-light vitesse-dark\" style=\"background-color:#ffffff;--shiki-dark-bg:#121212;color:#393a34;--shiki-dark:#dbd7caee\" tabindex=\"0\"><code class=\"language-bash\"><span class=\"line\"><span style=\"color:#A0ADA0;--shiki-dark:#758575DD\"># 运行一个名为 'my-web-app' 的 WordPress 容器</span></span>\n<span class=\"line\"><span style=\"color:#59873A;--shiki-dark:#80A665\">docker</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> run</span><span style=\"color:#A65E2B;--shiki-dark:#C99076\"> -d</span><span style=\"color:#A65E2B;--shiki-dark:#C99076\"> \\ </span><span style=\"color:#A0ADA0;--shiki-dark:#758575DD\">                   # 在后台运行</span></span>\n<span class=\"line\"><span style=\"color:#59873A;--shiki-dark:#80A665\">  --name</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> my-web-app</span><span style=\"color:#A65E2B;--shiki-dark:#C99076\"> \\ </span><span style=\"color:#A0ADA0;--shiki-dark:#758575DD\">             # 容器命名为 my-web-app</span></span>\n<span class=\"line\"><span style=\"color:#59873A;--shiki-dark:#80A665\">  -p</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> 8080:80</span><span style=\"color:#A65E2B;--shiki-dark:#C99076\"> \\ </span><span style=\"color:#A0ADA0;--shiki-dark:#758575DD\">                    # 将主机的8080端口映射到容器的80端口</span></span>\n<span class=\"line\"><span style=\"color:#59873A;--shiki-dark:#80A665\">  -e</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> WORDPRESS_DB_HOST=db:3306</span><span style=\"color:#A65E2B;--shiki-dark:#C99076\"> \\ </span><span style=\"color:#A0ADA0;--shiki-dark:#758575DD\">  # 设置环境变量：数据库地址</span></span>\n<span class=\"line\"><span style=\"color:#59873A;--shiki-dark:#80A665\">  -e</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> WORDPRESS_DB_USER=root</span><span style=\"color:#A65E2B;--shiki-dark:#C99076\"> \\ </span><span style=\"color:#A0ADA0;--shiki-dark:#758575DD\">     # 设置环境变量：数据库用户</span></span>\n<span class=\"line\"><span style=\"color:#59873A;--shiki-dark:#80A665\">  -e</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> WORDPRESS_DB_PASSWORD=secret</span><span style=\"color:#A65E2B;--shiki-dark:#C99076\"> \\#</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> 设置环境变量：数据库密码</span></span>\n<span class=\"line\"><span style=\"color:#59873A;--shiki-dark:#80A665\">  -v</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> wordpress_data:/var/www/html</span><span style=\"color:#A65E2B;--shiki-dark:#C99076\"> \\#</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> 挂载命名卷，持久化网站数据</span></span>\n<span class=\"line\"><span style=\"color:#59873A;--shiki-dark:#80A665\">  wordpress:latest</span><span style=\"color:#A0ADA0;--shiki-dark:#758575DD\">                 # 使用的镜像</span></span></code></pre>\n<h3 id=\"其他常用参数补充\"><a class=\"anchor\" href=\"#其他常用参数补充\">#</a> 其他常用参数补充</h3>\n<table>\n<thead>\n<tr>\n<th style=\"text-align:left\">参数</th>\n<th style=\"text-align:left\">全称</th>\n<th style=\"text-align:left\">作用</th>\n<th style=\"text-align:left\">示例</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td style=\"text-align:left\"><code>-it</code></td>\n<td style=\"text-align:left\"><code>--interactive</code> + <code>--tty</code></td>\n<td style=\"text-align:left\">以交互模式运行容器</td>\n<td style=\"text-align:left\"><code>docker run -it ubuntu /bin/bash</code></td>\n</tr>\n<tr>\n<td style=\"text-align:left\"><code>--rm</code></td>\n<td style=\"text-align:left\"><code>--rm</code></td>\n<td style=\"text-align:left\">容器退出时自动清理</td>\n<td style=\"text-align:left\"><code>docker run --rm alpine echo &quot;hello&quot;</code></td>\n</tr>\n<tr>\n<td style=\"text-align:left\"><code>-u</code></td>\n<td style=\"text-align:left\"><code>--user</code></td>\n<td style=\"text-align:left\">指定运行容器的用户</td>\n<td style=\"text-align:left\"><code>docker run -u 1000 myapp</code></td>\n</tr>\n<tr>\n<td style=\"text-align:left\"><code>--network</code></td>\n<td style=\"text-align:left\"><code>--network</code></td>\n<td style=\"text-align:left\">将容器连接到指定网络</td>\n<td style=\"text-align:left\"><code>docker run --network my_net nginx</code></td>\n</tr>\n</tbody>\n</table>\n",
            "tags": [
                "container",
                "docker",
                "learn",
                "linux",
                "virtual"
            ]
        }
    ]
}