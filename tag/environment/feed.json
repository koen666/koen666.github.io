{
    "version": "https://jsonfeed.org/version/1",
    "title": "木语 • All posts by \"environment\" tag",
    "description": "Spark!",
    "home_page_url": "http://example.com",
    "items": [
        {
            "id": "http://example.com/2025/11/28/pipenv/",
            "url": "http://example.com/2025/11/28/pipenv/",
            "title": "像前端package.json那样管理python依赖 (uv篇)",
            "date_published": "2025-11-27T16:00:00.000Z",
            "content_html": "<blockquote>\n<p><strong>Update 2025:</strong> 时代变了。虽然 Pipenv 曾经是很好的选择，但现在由 Rust 编写的 <code>uv</code> 才是版本答案。它比 pip 快 10-100 倍，且完美支持 <code>pyproject.toml</code> 标准。</p>\n</blockquote>\n<h3 id=\"1-安装-uv-the-new-standard\"><a class=\"anchor\" href=\"#1-安装-uv-the-new-standard\">#</a> 1. 安装 uv (The New Standard)</h3>\n<p>不需要先装 Python，uv甚至可以帮你管理 Python 版本。</p>\n<p><strong>Mac / Linux:</strong></p>\n<pre class=\"shiki shiki-themes vitesse-light vitesse-dark\" style=\"background-color:#ffffff;--shiki-dark-bg:#121212;color:#393a34;--shiki-dark:#dbd7caee\" tabindex=\"0\"><code class=\"language-bash\"><span class=\"line\"><span style=\"color:#59873A;--shiki-dark:#80A665\">curl</span><span style=\"color:#A65E2B;--shiki-dark:#C99076\"> -LsSf</span><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\"> </span><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">[</span><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\">https://astral.sh/uv/install.sh</span><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">]</span><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">(</span><span style=\"color:#59873A;--shiki-dark:#80A665\">https://astral.sh/uv/install.sh</span><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">)</span><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\"> </span><span style=\"color:#AB5959;--shiki-dark:#CB7676\">|</span><span style=\"color:#59873A;--shiki-dark:#80A665\"> sh</span></span></code></pre>\n<p><strong>Windows (PowerShell):</strong></p>\n<pre class=\"shiki shiki-themes vitesse-light vitesse-dark\" style=\"background-color:#ffffff;--shiki-dark-bg:#121212;color:#393a34;--shiki-dark:#dbd7caee\" tabindex=\"0\"><code class=\"language-powershell\"><span class=\"line\"><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\">powershell </span><span style=\"color:#999999;--shiki-dark:#666666\">-</span><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\">c </span><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">irm [https://astral.sh/uv/install.ps1](https://astral.sh/uv/install.ps1) | iex</span><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\">\"</span></span></code></pre>\n<h3 id=\"2-初始化项目-npm-init\"><a class=\"anchor\" href=\"#2-初始化项目-npm-init\">#</a> 2. 初始化项目 (npm init)</h3>\n<p>进入你的项目目录，执行初始化：</p>\n<pre class=\"shiki shiki-themes vitesse-light vitesse-dark\" style=\"background-color:#ffffff;--shiki-dark-bg:#121212;color:#393a34;--shiki-dark:#dbd7caee\" tabindex=\"0\"><code class=\"language-bash\"><span class=\"line\"><span style=\"color:#59873A;--shiki-dark:#80A665\">uv</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> init</span></span></code></pre>\n<p>或者创建一个新项目：</p>\n<pre class=\"shiki shiki-themes vitesse-light vitesse-dark\" style=\"background-color:#ffffff;--shiki-dark-bg:#121212;color:#393a34;--shiki-dark:#dbd7caee\" tabindex=\"0\"><code class=\"language-bash\"><span class=\"line\"><span style=\"color:#59873A;--shiki-dark:#80A665\">uv</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> init</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> my-project</span></span></code></pre>\n<p>你的目录下会出现两个核心文件，完美对应前端习惯：</p>\n<ul>\n<li><strong><code>pyproject.toml</code></strong> <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mo>≈</mo></mrow><annotation encoding=\"application/x-tex\">\\approx</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.4831em;\"></span><span class=\"mrel\">≈</span></span></span></span>  <code>package.json</code> (定义项目元数据和依赖)</li>\n<li><strong><code>uv.lock</code></strong> <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mo>≈</mo></mrow><annotation encoding=\"application/x-tex\">\\approx</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.4831em;\"></span><span class=\"mrel\">≈</span></span></span></span>  <code>package-lock.json</code> (锁定依赖具体版本)</li>\n</ul>\n<h3 id=\"3-安装依赖-npm-install-xxx\"><a class=\"anchor\" href=\"#3-安装依赖-npm-install-xxx\">#</a> 3. 安装依赖 (npm install xxx)</h3>\n<p>告别 <code>pip install</code>，现在我们用 <code>add</code>。</p>\n<p><strong>安装普通依赖：</strong></p>\n<pre class=\"shiki shiki-themes vitesse-light vitesse-dark\" style=\"background-color:#ffffff;--shiki-dark-bg:#121212;color:#393a34;--shiki-dark:#dbd7caee\" tabindex=\"0\"><code class=\"language-bash\"><span class=\"line\"><span style=\"color:#59873A;--shiki-dark:#80A665\">uv</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> add</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> requests</span></span>\n<span class=\"line\"><span style=\"color:#A0ADA0;--shiki-dark:#758575DD\"># 甚至可以指定版本</span></span>\n<span class=\"line\"><span style=\"color:#59873A;--shiki-dark:#80A665\">uv</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> add</span><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\"> \"</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">flask&gt;=2.0</span><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\">\"</span></span></code></pre>\n<p><strong>安装开发依赖 (DevDependencies):</strong></p>\n<pre class=\"shiki shiki-themes vitesse-light vitesse-dark\" style=\"background-color:#ffffff;--shiki-dark-bg:#121212;color:#393a34;--shiki-dark:#dbd7caee\" tabindex=\"0\"><code class=\"language-bash\"><span class=\"line\"><span style=\"color:#59873A;--shiki-dark:#80A665\">uv</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> add</span><span style=\"color:#A65E2B;--shiki-dark:#C99076\"> --dev</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> pytest</span></span></code></pre>\n<h3 id=\"4-迁移旧项目-requirementstxt\"><a class=\"anchor\" href=\"#4-迁移旧项目-requirementstxt\">#</a> 4. 迁移旧项目 (requirements.txt)</h3>\n<p>如果你有一个老的 <code>requirements.txt</code>，不需要像以前那样用 PowerShell 转码了，<code>uv</code> 对编码支持很好，直接读取并添加到 <code>pyproject.toml</code> 中：</p>\n<pre class=\"shiki shiki-themes vitesse-light vitesse-dark\" style=\"background-color:#ffffff;--shiki-dark-bg:#121212;color:#393a34;--shiki-dark:#dbd7caee\" tabindex=\"0\"><code class=\"language-bash\"><span class=\"line\"><span style=\"color:#59873A;--shiki-dark:#80A665\">uv</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> add</span><span style=\"color:#A65E2B;--shiki-dark:#C99076\"> -r</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> requirements.txt</span></span></code></pre>\n<p>执行完这一步，你的旧项目就瞬间完成了“现代化”改造。</p>\n<h3 id=\"5-一键同步环境-npm-install\"><a class=\"anchor\" href=\"#5-一键同步环境-npm-install\">#</a> 5. 一键同步环境 (npm install)</h3>\n<p>当你把代码 clone 下来，或者拉取了队友的代码后，只需要一个命令就能把所有依赖（包括 Python 解释器本身）全部装好：</p>\n<pre class=\"shiki shiki-themes vitesse-light vitesse-dark\" style=\"background-color:#ffffff;--shiki-dark-bg:#121212;color:#393a34;--shiki-dark:#dbd7caee\" tabindex=\"0\"><code class=\"language-bash\"><span class=\"line\"><span style=\"color:#59873A;--shiki-dark:#80A665\">uv</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> sync</span></span></code></pre>\n<p>它会自动创建虚拟环境（默认在 <code>.venv</code>），你无需手动配置。</p>\n<h3 id=\"6-运行代码-npm-run-start\"><a class=\"anchor\" href=\"#6-运行代码-npm-run-start\">#</a> 6. 运行代码 (npm run start)</h3>\n<p>不需要手动激活虚拟环境（<code>source venv/bin/activate</code> 已经是过去式了），直接用 <code>uv run</code>：</p>\n<pre class=\"shiki shiki-themes vitesse-light vitesse-dark\" style=\"background-color:#ffffff;--shiki-dark-bg:#121212;color:#393a34;--shiki-dark:#dbd7caee\" tabindex=\"0\"><code class=\"language-bash\"><span class=\"line\"><span style=\"color:#A0ADA0;--shiki-dark:#758575DD\"># 运行脚本</span></span>\n<span class=\"line\"><span style=\"color:#59873A;--shiki-dark:#80A665\">uv</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> run</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> app.py</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#A0ADA0;--shiki-dark:#758575DD\"># 运行模块</span></span>\n<span class=\"line\"><span style=\"color:#59873A;--shiki-dark:#80A665\">uv</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> run</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> python</span><span style=\"color:#A65E2B;--shiki-dark:#C99076\"> -m</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> http.server</span></span></code></pre>\n<p>uv 会自动检测并使用项目环境中的 Python。</p>\n<hr>\n<h3 id=\"总结前端-vs-python-uv版-对照表\"><a class=\"anchor\" href=\"#总结前端-vs-python-uv版-对照表\">#</a> 总结：前端 vs Python (uv版) 对照表</h3>\n<table>\n<thead>\n<tr>\n<th style=\"text-align:left\">前端 (Node/NPM)</th>\n<th style=\"text-align:left\">Python (uv)</th>\n<th style=\"text-align:left\">说明</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td style=\"text-align:left\"><code>package.json</code></td>\n<td style=\"text-align:left\"><code>pyproject.toml</code></td>\n<td style=\"text-align:left\">项目配置文件</td>\n</tr>\n<tr>\n<td style=\"text-align:left\"><code>package-lock.json</code></td>\n<td style=\"text-align:left\"><code>uv.lock</code></td>\n<td style=\"text-align:left\">版本锁定文件</td>\n</tr>\n<tr>\n<td style=\"text-align:left\"><code>npm init</code></td>\n<td style=\"text-align:left\"><code>uv init</code></td>\n<td style=\"text-align:left\">初始化</td>\n</tr>\n<tr>\n<td style=\"text-align:left\"><code>npm install axios</code></td>\n<td style=\"text-align:left\"><code>uv add requests</code></td>\n<td style=\"text-align:left\">安装依赖</td>\n</tr>\n<tr>\n<td style=\"text-align:left\"><code>npm install</code></td>\n<td style=\"text-align:left\"><code>uv sync</code></td>\n<td style=\"text-align:left\"><strong>一键安装所有依赖</strong></td>\n</tr>\n<tr>\n<td style=\"text-align:left\"><code>npm run start</code></td>\n<td style=\"text-align:left\"><code>uv run app.py</code></td>\n<td style=\"text-align:left\">使用环境运行</td>\n</tr>\n<tr>\n<td style=\"text-align:left\"><code>nvm use 18</code></td>\n<td style=\"text-align:left\"><code>uv python pin 3.12</code></td>\n<td style=\"text-align:left\"><strong>管理语言版本</strong></td>\n</tr>\n</tbody>\n</table>\n",
            "tags": [
                "python",
                "uv",
                "environment"
            ]
        }
    ]
}